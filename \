
import React from "react";
import { Radar } from "react-chartjs-2";

function RadarChart({ chartData }: { chartData: any }) {

  return (
    <div>
      <Radar
        data={chartData}
        height="600px"
        width="600px"
        plugins={[
          {
            id: 'custom-labels',
            afterDatasetDraw(chart) {
              if (chart.getDatasetMeta(0).data[0] && chart.data.labels) {
                const imgArr = []
                for (let i = 0; i < chart.data.labels.length; i++) {
                  const img = new Image(20)
                  img.src = `/images/${chart.data.labels[i]}.jpg`
                  imgArr.push(img)
                }
                const { ctx, data, scales: { r } } = chart
                const xCenter = (r as any).xCenter
                const yCenter = (r as any).yCenter
                const drawingArea = (r as any).drawingArea
                const angleLines = data.datasets[0].data.length
                const angle = 360 / angleLines

                const degToRad = (deg: number) => {
                  return deg * (Math.PI / 180);
                }

                ctx.save();
                
                for (let i = 0; i < imgArr.length; i++) {

                  const deg = angle * i
                  const rad = degToRad(deg)
                  const xCoor = Math.cos(rad)
                  const yCoor = Math.sin(rad)
                  ctx.translate(xCenter, yCenter)
                  ctx.rotate(rad)
                  ctx.drawImage(imgArr[i], xCoor , yCoor, 20, 20)
                }
                ctx.restore();

              }
            }
          }]}
        options={{
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
            }
          }
        }}
      />
    </div>
  );
}
export default RadarChart;
